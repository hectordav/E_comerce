(function(){function b(a){var c,b=document.createElement("div");return b.innerHTML="<a></a>",b.firstChild.href=a,b.innerHTML=b.innerHTML,c=b.firstChild,""+c.protocol+"//"+c.host}function c(){var a=navigator.language||navigator.userLanguage,b=a.split("-"),c=!1;return b.length>=1&&(c="es"===b[0]),c}if(!this.StartCheckout){this.StartCheckout={};var a=document.currentScript||function(){var a=document.getElementsByTagName("script");return a[a.length-1]}();this.StartCheckout.isSpanish=c(),this.StartCheckout.onCI=a.src.indexOf("qa=true")!==-1,this.StartCheckout.onProd=b(a.src).indexOf("static-content.vnforapps.com")!==-1,this.StartCheckout.host=(this.StartCheckout.onProd,"https://static-content.vnforapps.com/v1"),this.StartCheckout.scriptTag=a}}).call(this),function(a){this.StartCheckout.utils||(this.StartCheckout.utils={bind:function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):void 0},bindFn:function(a,b){return function(){return a.apply(b,arguments)}},addJsLink:function(b){var c=a.createElement("script");c.src=b,c.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(c)},addCssLink:function(b){var c=a.createElement("link");c.type="text/css",c.rel="stylesheet",c.href=b,a.getElementsByTagName("head")[0].appendChild(c)}})}.call(this,document),function(){this.StartCheckout.Navigator||(this.StartCheckout.Navigator=function(){function a(){}function b(){var b,a=navigator.userAgent,c=a.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(b=/\brv[ :]+(\d+)/g.exec(a)||[],{name:"IE",version:b[1]||""}):"Chrome"===c[1]&&(b=a.match(/\bOPR\/(\d+)/),null!=b)?{name:"Opera",version:b[1]}:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(b=a.match(/version\/(\d+)/i))&&c.splice(1,1,b[1]),{name:c[0],version:c[1]})}return a.isSupportTLS1_2=function(){var a=!0,c=b(),d=parseInt(c.version);switch(c.name.toLowerCase()){case"chrome":d<30&&(a=!1);break;case"opera":d<17&&(a=!1);break;case"ie":case"msie":d<10&&(a=!1);break;case"safari":d<7&&(a=!1);break;case"firefox":d<27&&(a=!1)}return a},a}())}.call(this),function(){if(!this.StartCheckout.RPC){var a=this.StartCheckout.utils;this.StartCheckout.RPC=function(){function b(b){this.target=b.target,this.type=b.type||"server",this.methods={},this.messages=[],this.isReady=!1,a.bind(window,"message",function(a){return function(){return a.handleMessage.apply(a,arguments)}}(this))}return b.prototype.sendMessage=function(a){data=JSON.stringify(a),this.send(data)},b.prototype.send=function(a){this.isReady===!0?this.target.postMessage(a,"*"):this.messages.push(a)},b.prototype.handleMessage=function(a){a.source==this.target&&this.processMessage(a.data)},b.prototype.processMessage=function(a){return message=JSON.parse(a),message.isReady===!0&&this.isReady===!1?void this.ready():void(this.methods[message.method]&&this.methods[message.method].apply(this.methods,message.args))},b.prototype.ready=function(){var a;for(this.isReady=!0,this.sendMessage({isReady:!0,type:this.type});a=this.messages.shift();)this.send(a)},b.prototype.invoke=function(){var a,b,c=Array.prototype.slice;a=arguments[0],b=c.call(arguments,1),this.sendMessage({method:a,args:b})},b}()}}.call(this),function(a){if(!this.StartCheckout.Iframe){var b=this.StartCheckout.RPC,c=this.StartCheckout.utils;this.StartCheckout.Iframe=function(){function d(a){this.opened=!1,this.src=a,this.iframe=this.addIframe(),this.rpc=new b({target:this.iframe.contentWindow,type:"server"}),this.rpc.methods.close=c.bindFn(this.close,this),this.rpc.methods.complete=c.bindFn(this.complete,this)}return d.prototype.config=function(a){this.configuration=a||(a={}),this.rpc.invoke("config",this.configuration)},d.prototype.open=function(a){this.opened||(this.opened=!0,this.iframe.style.display="block",console.log("iframe display block"),this.rpc.invoke("open",a))},d.prototype.complete=function(a){this.configuration.complete(a)},d.prototype.close=function(){this.opened=!1,this.iframe.style.display="none",a.body.className=a.body.className.replace("visanet-opened","")},d.prototype.addIframe=function(){var b,d=a.createElement("div");return d.id="visaNetWrapper",b=a.createElement("iframe"),b.id="visaNetJS",b.setAttribute("frameBorder","0"),b.setAttribute("allowtransparency","true"),b.style.cssText="z-index: 10000;\ndisplay: none;\nbackground: transparent;\nbackground: rgba(0,0,0,0.005);\nborder: 0px none transparent;\noverflow-x: hidden;\noverflow-y: hidden;\nvisibility: hidden;\nmargin: 0;\npadding: 0;\n-webkit-tap-highlight-color: transparent;\n-webkit-touch-callout: none; position: fixed;\nleft: 0;\ntop: 0;\nwidth: 100%;\nheight: 100%;",b.src=this.src,d.appendChild(b),a.body.appendChild(d),c.bind(b,"load",function(){b.style.visibility="visible"}),b},d}()}}.call(this,document),function(){if(!this.StartCheckout.Checkout){this.StartCheckout.Navigator.isSupportTLS1_2()===!1&&alert("Due to security reasons please, use modern browser (IE11, FireFox, Chrome or Safari) to make payment!");var a=this.StartCheckout.Iframe;this.StartCheckout.Checkout=function(){function c(){}var d=StartCheckout.host+"/visanet.html?"+Math.random();StartCheckout.onCI&&(d+="&qa=true");var e;return"undefined"==typeof e&&(e=new a(d)),c.config=function(a){this.configuration=a,e.config(a)},c.open=function(a){e.open(a)},c}()}}.call(this),function(){if(!this.StartCheckout.Button){var a=this.StartCheckout.utils,b=this.StartCheckout,c=window.attachEvent&&!window.addEventListener;b.Button=function(){function d(a,b){var c=document.createElement("input");return c.type="hidden",c.value=b,c.name=a,c}function e(){for(var a=1;a<arguments.length;a++)if(arguments[a]==arguments[0])return!0;return!1}function f(c,d){this.form=c,this.complete=a.bindFn(this.complete,this),this.open=a.bindFn(this.open,this),this.config=d,this.config.complete=this.complete,this.params={amount:d.amount,currency:d.currency,email:d.email,name:d.name,lastname:d.lastname,sessionkey:d.sessionkey,purchasenumber:d.purchasenumber},b.config(this.config),this.render()}return f.prototype.render=function(){var c=b.host+"/img/button/",d="true"===this.config.recurrence.toString().trim().toLowerCase();a.addCssLink(b.host+"/css/button.css"),this.btn=document.createElement("button"),this.btn.setAttribute("type","submit"),this.config.size=this.config.size?this.config.size.trim().toLowerCase():"default",this.config.labelcolor=this.config.labelcolor?this.config.labelcolor.trim().toLowerCase():"navy",e(this.config.size,"small","medium","large")||(this.config.size="default"),e(this.config.labelcolor,"navy","gray")||(this.config.labelcolor="navy"),this.btn.className="start-js-btn modal-opener "+(this.config.size?this.config.size:"default"),this.btn.style="true"===this.config.custom?"display:none;":"",c+=b.isSpanish?"ES/":"EN/",c+=this.config.labelcolor,c+="/"+this.config.size+(d?"/SubscribeWith.png":"/PayWith.png"),this.btn.style.background='url("'+c+'")',a.bind(this.btn,"click",this.open),this.form.appendChild(this.btn)},f.prototype.open=function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,c?alert("Due to security reasons please, use modern browser (IE11, FireFox, Chrome or Safari) to make payment!"):(navigator.userAgent.match(/iPhone|iPad|iPod/i)&&(window.scrollTo(0,0),$("body").addClass("visanet-opened")),b.open(this.params)),!1},f.prototype.complete=function(a){this.form.appendChild(d("transactionToken",a.token)),this.form.appendChild(d("customerEmail",a.email)),this.form.appendChild(d("channel",a.channel)),this.form.submit()},f}()}}.call(this),function(){this.StartCheckout.open||(this.StartCheckout.open=this.StartCheckout.Checkout.open,this.StartCheckout.config=this.StartCheckout.Checkout.config)}.call(this),function(){function r(a){function b(a,b){return b.toUpperCase()}return a.replace(/(?:[-_])(\w)/g,b)}if(!this.StartCheckout.auto){this.StartCheckout.auto=!0;var a=this.StartCheckout.scriptTag,b=a.parentElement,c={};if("FORM"==b.tagName){var d,e;for(i=0;i<a.attributes.length;i++)d=a.attributes[i],e=d.name.match(/^data-(.+)$/),null!==e&&(paramName=r(e[1]),c[paramName]=d.value);c.currency="SOL";var f=!1;if(void 0!==c.amount&&null!==c.amount){var g=/^\d+$/;f=g.test(c.amount)}if(void 0!==c.recurrence&&null!==c.recurrence){var h="true"===c.recurrence.toString().trim().toLowerCase();void 0!==c.recurrencetype&&null!==c.recurrencetype?c.recurrencetype.toString().trim().toLowerCase():"fixed";if(h){var k=!1;if(void 0!==c.recurrenceamount&&null!==c.recurrenceamount&&""!==c.recurrenceamount){var g=/^\d+$/;if(k=g.test(c.recurrenceamount),!k)return alert("Field data-recurrenceamount has to be a numeric value."),!1}if(!f&&k?(c.amount=c.recurrenceamount,f=!0):f&&!k&&(c.recurrenceamount=c.amout),!k&&!f)return alert("Field data-recurrenceamount has to be set as a numeric value when data-recurrence has been set to true."),!1;var l=void 0!==c.beneficiaryid&&null!==c.beneficiaryid&&""!==c.beneficiaryid.trim(),m=void 0!==c.documenttype&&null!==c.documenttype&&""!==c.documenttype.trim(),n=void 0!==c.documentid&&null!==c.documentid&&""!==c.documentid.trim(),o=void 0!==c.productid&&null!==c.productid&&""!==c.productid.trim(),p=void 0!==c.phone&&null!==c.phone&&""!==c.phone.trim();if(!(l&&m&&n&&o&&p))return alert("Fields data-beneficiaryid, data-documenttype, data-documentid, data-productid, data-phone are mandatory when set recurrence."),!1}}if(!f)return alert("Field data-amount has to be a numeric value."),!1;if(!(c.key&&c.amount&&c.currency&&c.sessionkey&&c.purchasenumber))return alert("At a minimum, the data-key, data-sessionkey, data-amount, data-purchasenumber and data-currency options have to be set"),!1;c.amount=parseInt(c.amount,10);new this.StartCheckout.Button(b,c)}}}.call(this);